A Federal district judge has sentenced a key witness in the trial of Mayor Marion S. Barry Jr. of Washington to five years' probation on drug charges.

The witness, Charles Lewis, a former government employee in the Virgin Islands and a longtime friend of the Mayor, could have received a maximum term of 80 years on his conviction in April 1989 for possessing and selling crack.

Instead, the judge, Stanley Brotman, sentenced Mr. Lewis to a five-year probation program in which he must perform 1,000 hours of community service and undergo periodic tests for drug use.

In handing down the sentence on Thursday, Judge Brotman said Mr. Lewis had cooperated with the Barry investigation.